This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
src/
  db.ts
  router.ts
.gitignore
index.ts
package.json
README.md
tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="src/db.ts">
const dbService = () => {
  const db = Object.create(null);
  return {
    getPair: (key: string) => {
      return db[key];
    },
    setPair: (key: string, value: unknown) => {
      db[key] = value;
      return { key, value };
    },
    getAll: () => {
      return db;
    },
  };
};
export default dbService;
export type DbService = ReturnType<typeof dbService>;
</file>

<file path="src/router.ts">
import type { Express, Request, Response } from "express";
import { type DbService } from "./db";

const router = (app: Express, db: DbService) => {
  app.get("/", async (req, res) => {
    return res.send("Hello, world!");
  });

  app.get("/get/all", async (req, res) => {
    return res.send(db.getAll());
  });

  app.get("/get", async (req: Request, res: Response) => {
    try {
      const key = req.query.key;
      if (!key || typeof key !== "string") {
        return res.status(400).send("Missing key");
      }
      const value = db.getPair(key);
      if (!value) return res.status(404).send("Not found");
      return res.send(value);
    } catch (error) {
      return res.status(500).send("Internal server error");
    }
  });

  app.get("/set", async (req: Request, res: Response) => {
    try {
      const key = Object.keys(req.query)[0];
      if (!key || typeof key !== "string") {
        return res.status(400).send("Missing key");
      }
      const value = req.query[key];
      return res.send(db.setPair(key, value));
    } catch (error) {
      return res.status(500).send("Internal server error");
    }
  });
};

export default router;
</file>

<file path=".gitignore">
# dependencies (bun install)
node_modules

# output
out
dist
*.tgz

# code coverage
coverage
*.lcov

# logs
logs
_.log
report.[0-9]_.[0-9]_.[0-9]_.[0-9]_.json

# dotenv environment variable files
.env
.env.development.local
.env.test.local
.env.production.local
.env.local

# caches
.eslintcache
.cache
*.tsbuildinfo

# IntelliJ based IDEs
.idea

# Finder (MacOS) folder config
.DS_Store
</file>

<file path="index.ts">
import express from "express";
import router from "./src/router";
import dbService from "./src/db";

const app = express();

const db = dbService();
router(app, db);

app.listen({ port: 4000 }, () => {
  console.log("Server is running on port 4000");
});
</file>

<file path="package.json">
{
  "name": "pair-interview",
  "module": "index.ts",
  "type": "module",
  "scripts": {
    "dev": "bun  --hot run index.ts"
  },
  "private": true,
  "devDependencies": {
    "@types/bun": "latest"
  },
  "peerDependencies": {
    "typescript": "^5"
  },
  "dependencies": {
    "@types/express": "^5.0.6",
    "express": "^5.2.1"
  }
}
</file>

<file path="README.md">
# pair-interview

To install dependencies:

```bash
bun install
```

To run:

```bash
bun run index.ts
```

This project was created using `bun init` in bun v1.2.14. [Bun](https://bun.sh) is a fast all-in-one JavaScript runtime.
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    // Environment setup & latest features
    "lib": ["ESNext"],
    "target": "ESNext",
    "module": "Preserve",
    "moduleDetection": "force",
    "jsx": "react-jsx",
    "allowJs": true,

    // Bundler mode
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "noEmit": true,

    // Best practices
    "strict": true,
    "skipLibCheck": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedIndexedAccess": true,
    "noImplicitOverride": true,

    // Some stricter flags (disabled by default)
    "noUnusedLocals": false,
    "noUnusedParameters": false,
    "noPropertyAccessFromIndexSignature": false
  }
}
</file>

</files>
